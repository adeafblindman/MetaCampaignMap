<!DOCTYPE html>

<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="./favicon.png">

  <title>Loading the map...</title>

  <!-- jQuery-->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>


<!-- jQuery first, then Popper.js, then Bootstrap JS SEARCH CODE-->
    <script src="lib/jquery-3.3.1.min.js"></script>
    <script src="lib/popper.min.js"></script>
    <script src="lib/bootstrap.min.js"></script>

    <script src="lib/ejs.min.js"></script>
    <script src="lib/jquery.address.js"></script>
    <script src="lib/jquery.csv.min.js"></script>
    <script src="lib/moment.js"></script>
    <script src="lib/geojson.min.js"></script>
    <script src="js/csv-to-geojson.js"></script>


  
  <!-- Load Leaflet CSS and JS-->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>


<!-- Custom JavaScript SEACH CODE -->
    <script src="js/searchable_map_lib.js"></script>
    <script src="js/analytics_lib.js"></script>


  
  <!-- PapaParse -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/js/fontawesome.min.js"></script>

  <!-- leaflet-providers-->
  <script src="https://unpkg.com/leaflet-providers@2.0.0/leaflet-providers.js"></script>

  <!-- Leaflet.awesome-markers v2.0.4, manually updated to svg to allow hex and material icons -->
  <link rel="stylesheet" type="text/css" href="scripts/Leaflet.awesome-markers/dist/leaflet.awesome-markers.css">
  <script type="text/javascript" src="scripts/Leaflet.awesome-markers/dist/leaflet.awesome-markers.js"></script>

  <!-- Leaflet Markercluster -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css">
  <script type="text/javascript" src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

  <!-- Leaflet Markercluster layer support -->
  <script src="https://unpkg.com/leaflet.markercluster.layersupport@2.0.1/dist/leaflet.markercluster.layersupport.js"></script>

  <!-- Leaflet control geocoder -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder@1.13.0/dist/Control.Geocoder.css" />
  <script src="https://unpkg.com/leaflet-control-geocoder@1.13.0/dist/Control.Geocoder.js"></script>

  <!-- Locate Control -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-locatecontrol/0.72.0/L.Control.Locate.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-locatecontrol/0.72.0/L.Control.Locate.min.js"></script>

  <!-- jQuery-CSV -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/1.0.11/jquery.csv.min.js"></script>

  <!-- Custom style sheet -->
  <link rel="stylesheet" type="text/css" href="style.css">

  <!-- DataTables -->
  <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css" />

  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">



<!-- Open Graph Meta Elements for Social Cards -->
<meta property="og:site_name" content="ARMCO Meta Campaign Map" />
<meta property="og:title" content="ARMCO Meta Campaign 2 Map" />
<meta property="og:description" content="Online map for ARMCO's Meta Campaign" />
<meta property="og:image" content="https://github.com/adeafblindman/MetaCampaignMap/blob/main/SOCIAL.png" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://adeafblindman.github.io/MetaCampaignMap/" />

  
</head>

<body>

  <div class="loader">Loading...</div>
  <div id="map"></div>
  <table id="maptable" class="display"></table>

  <script type="text/javascript">
    var map = L.map('map', {
      attributionControl: false,
      zoomControl: false,
      scrollWheelZoom: false,
      tap: false
    }).setView([41.76,-72.69], 11); // default center is overridden by Google Sheet options and points
  </script>

 <script type="text/javascript">
//Coordinate Finder
    var marker = L.marker([60.326948, -135.175781], {
      draggable: true,
    }).addTo(map);
    marker.bindPopup('LatLng Marker').openPopup();
    marker.on('dragend', function(e) {
      marker.getPopup().setContent(marker.getLatLng().toString()).openOn(map);
    });
 </script>   

<script> // image overlays
// NO FLY ZONE
var imageUrl = 'media/Operations/Campaign_2_Blood__Sand_No_Fly_Zone__Hazardous_Winds.png';
var latLngBounds = L.latLngBounds([[60.5, -135], [-60.5, 135]]); // [top left] [bottom right]
var imageOverlay = L.imageOverlay(imageUrl, latLngBounds, {
    interactive: true
}).addTo(map);

// EDELWEISS
var imageUrl = 'media/Operations/Campaign_2_Blood__Sand_Edelweiss.png';
var latLngBounds = L.latLngBounds([[60.5, -135], [-60.5, 135]]);
var imageOverlay = L.imageOverlay(imageUrl, latLngBounds, {
    interactive: true
}).addTo(map);


  // BOB
var imageUrl = 'media/Operations/Campaign_2_Blood__Sand_Bob_The_Builder.png';
var latLngBounds = L.latLngBounds([[60.5, -135], [-60.5, 135]]);
var imageOverlay = L.imageOverlay(imageUrl, latLngBounds, {
    interactive: true
}).addTo(map);

  // DESERT SURPRISE
var imageUrl = 'media/Operations/Campaign_2_Blood__Sand_Desert_Surprise.png';
var latLngBounds = L.latLngBounds([[60.5, -135], [-60.5, 135]]);
var imageOverlay = L.imageOverlay(imageUrl, latLngBounds, {
    interactive: true
}).addTo(map);

    // HOMEFRONT
var imageUrl = 'media/Operations/Campaign_2_Blood__Sand_Homefront.png';
var latLngBounds = L.latLngBounds([[60.5, -135], [-60.5, 135]]);
var imageOverlay = L.imageOverlay(imageUrl, latLngBounds, {
    interactive: true
}).addTo(map);

      // INCENSE IRON
var imageUrl = 'media/Operations/Campaign_2_Blood__Sand_Incense__Iron.png';
var latLngBounds = L.latLngBounds([[60.5, -135], [-60.5, 135]]);
var imageOverlay = L.imageOverlay(imageUrl, latLngBounds, {
    interactive: true
}).addTo(map);

        // SAND RAT
var imageUrl = 'media/Operations/Campaign_2_Blood__Sand_Sand_Rat.png';
var latLngBounds = L.latLngBounds([[60.5, -135], [-60.5, 135]]);
var imageOverlay = L.imageOverlay(imageUrl, latLngBounds, {
    interactive: true
}).addTo(map);

          // Train
var imageUrl = 'media/icons/Train.png';
var latLngBounds = L.latLngBounds([[60.5, -135], [-60.5, 135]]);
var imageOverlay = L.imageOverlay(imageUrl, latLngBounds, {
    interactive: true
}).addTo(map);

</script> 


    <nav class="navbar navbar-expand-md navbar-light mb-2">
      <a class="navbar-brand" href="/">
        Searchable Map Template - CSV
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse mr-auto" id="navbarsExampleDefault">
        <ul class="navbar-nav ml-auto">
          <li class='nav-item'>
            <a class="nav-link active" href="/"><i class="fa fa-map-marker" aria-hidden="true"></i> Map</a>
          </li>
          <li class='nav-item'>
            <a class="nav-link" href="/about.html"><i class="fa fa-info-circle" aria-hidden="true"></i> About</a>
          </li>
        </ul>
      </div>
    </nav>

    <main role="main" class="container-fluid">

      <div class='row'>
        <div class="col-md-4">
          <p>You want to put your data on a searchable, filterable map. Provide a comma separated file (CSV) and this free, open source template will do the rest. <br /><a href='/about.html'>Read more &raquo;</a></p>

          <div class="card bg-light">
            <div class="card-body">
              <div class='row'>
                <div class="col-md-8">
                  <div class="form-group">
                      Near an address
                      <input class='form-control' id='search-address' placeholder='Enter an address' type='text'>
                  </div>
                </div>

                <div class="col-md-4">
                  <div class='form-group'>
                      Within
                      <select id='search-radius' class='form-control'>
                        <option value='400'>2 blocks</option>
                        <option value='805'>1/2 mile</option>
                        <option value='1610'>1 mile</option>
                        <option value='3220'>2 miles</option>
                        <option value='8050'>5 miles</option>
                      </select>
                  </div>
                </div>
              </div>

              <div class='row'>
                <div class="col-md-12">
                  <div class="form-group">
                      Search by name
                      <input class='form-control' id='search-name' placeholder='Enter a business or organization name' type='text'>
                  </div>
                </div>
              </div>

              <button class='btn btn-primary' id="btnSearch"><i class='fa fa-search'></i> Search</button>
              <a href="/" class='btn btn-secondary' id="btnReset" title="Reset"><i class="fa fa-repeat" aria-hidden="true"></i> Reset</a>
              <button class='btn btn-dark' id='btnViewMode' title='Change view'><i class='fa fa-list'></i> List view</button>

              </div>
            </div>
          </div>

          <div class='col-md-8'>
            <div id='mapCanvas' style="display: block; height: 1000px;"></div>
            <div id="listCanvas" style="display: none">
              <h2 class='list-header hidden-xs'>Search results <small id='list-result-count'></small></h2>
              
              <div class="table-responsive">
                <table class="table">
                  <thead>
                    <tr>
                      <th scope="col">Location</th>
                      <th scope="col">Address</th>
                      <th scope="col">Phone</th>
                      <th scope="col">Hours</th>
                    </tr>
                  </thead>
                  <tbody id='results-list'></tbody>
                </table>
              </div>
            </div>
            <p class='float-right'>Based on <a href='https://github.com/datamade/searchable-map-template-csv' target='_blank'>Searchable Map Template - CSV</a> by <a href='https://derekeder.com/' target='_blank'>Derek Eder</a> and <a href='https://datamade.us/' target='_blank'>DataMade</a></p>
          </div>
        </div>

        <div class="modal fade" id="modal-pop" tabindex="-1" role="dialog">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-body">
                <div class="container-fluid bd-example-row">
                  <div class="row">
                    <div class="col-md-12">
                      <button type="button" class="close close-btn" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><i class="fa fa-times-circle" aria-hidden="true"></i></span></button>
                      <div id="modal-main"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div><!-- /.modal-content -->
          </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <script type="text/javascript" src="js/map.js"></script>

    </main>



  
  <script type="text/javascript" src="./google-doc-url.js"></script>
  <script type="text/javascript" src="./scripts/constants.js"></script>
  <script type="text/javascript" src="./scripts/palette.js"></script>
  <script type="text/javascript" src="./scripts/polylabel.js"></script>
  <script type="text/javascript" src="./scripts/z3.js"></script>

</body>
</html>
